#===============================================================
#============\u4e8b\u52a1\u7ba1\u7406\u5668(TM)\u914d\u7f6e\u53c2\u6570   ==================================
#===============================================================
#\u6307\u5b9a\u662f\u5426\u542f\u52a8\u78c1\u76d8\u65e5\u5fd7\uff0c\u9ed8\u8ba4\u4e3atrue\u3002\u5728\u751f\u4ea7\u73af\u5883\u4e0b\u4e00\u5b9a\u8981\u4fdd\u8bc1\u4e3atrue\uff0c\u5426\u5219\u6570\u636e\u7684\u5b8c\u6574\u6027\u65e0\u6cd5\u4fdd\u8bc1
com.atomikos.icatch.enable_logging=true
#JTA/XA\u8d44\u6e90\u662f\u5426\u5e94\u8be5\u81ea\u52a8\u6ce8\u518c
com.atomikos.icatch.automatic_resource_registration=true
#JTA\u4e8b\u52a1\u7684\u9ed8\u8ba4\u8d85\u65f6\u65f6\u95f4\uff0c\u9ed8\u8ba4\u4e3a10000ms
com.atomikos.icatch.default_jta_timeout=10000
#\u4e8b\u52a1\u7684\u6700\u5927\u8d85\u65f6\u65f6\u95f4\uff0c\u9ed8\u8ba4\u4e3a300000ms\u3002\u8fd9\u8868\u793a\u4e8b\u52a1\u8d85\u65f6\u65f6\u95f4\u7531 UserTransaction.setTransactionTimeout()\u8f83\u5927\u8005\u51b3\u5b9a\u30024.x\u7248\u672c\u4e4b\u540e\uff0c\u6307\u5b9a\u4e3a0\u7684\u8bdd\u5219\u8868\u793a\u4e0d\u8bbe\u7f6e\u8d85\u65f6\u65f6\u95f4
com.atomikos.icatch.max_timeout=30000
#\u6307\u5b9a\u5728\u4e24\u9636\u6bb5\u63d0\u4ea4\u65f6\uff0c\u662f\u5426\u4f7f\u7528\u4e0d\u540c\u7684\u7ebf\u7a0b(\u610f\u5473\u7740\u5e76\u884c)\u30023.7\u7248\u672c\u4e4b\u540e\u9ed8\u8ba4\u4e3afalse\uff0c\u66f4\u65e9\u7684\u7248\u672c\u9ed8\u8ba4\u4e3atrue\u3002\u5982\u679c\u4e3afalse\uff0c\u5219\u63d0\u4ea4\u5c06\u6309\u7167\u4e8b\u52a1\u4e2d\u8bbf\u95ee\u8d44\u6e90\u7684\u987a\u5e8f\u8fdb\u884c\u3002
com.atomikos.icatch.threaded_2pc=false
#\u6307\u5b9a\u6700\u591a\u53ef\u4ee5\u540c\u65f6\u8fd0\u884c\u7684\u4e8b\u52a1\u6570\u91cf\uff0c\u9ed8\u8ba4\u503c\u4e3a50\uff0c\u8d1f\u6570\u8868\u793a\u6ca1\u6709\u6570\u91cf\u9650\u5236\u3002\u5728\u8c03\u7528 UserTransaction.begin()\u65b9\u6cd5\u65f6\uff0c\u53ef\u80fd\u4f1a\u629b\u51fa\u4e00\u4e2a\u201dMax number of active transactions reached\u201d\u5f02\u5e38\u4fe1\u606f\uff0c\u8868\u793a\u8d85\u51fa\u6700\u5927\u4e8b\u52a1\u6570\u9650\u5236
com.atomikos.icatch.max_actives=50
#\u662f\u5426\u652f\u6301subtransaction\uff0c\u9ed8\u8ba4\u4e3atrue
com.atomikos.icatch.allow_subtransactions=true
#\u6307\u5b9a\u5728\u53ef\u80fd\u7684\u60c5\u51b5\u4e0b\uff0c\u5426\u5e94\u8be5join \u5b50\u4e8b\u52a1(subtransactions)\uff0c\u9ed8\u8ba4\u503c\u4e3atrue\u3002\u5982\u679c\u8bbe\u7f6e\u4e3afalse\uff0c\u5bf9\u4e8e\u6709\u5173\u8054\u7684\u4e0d\u540csubtransactions\uff0c\u4e0d\u4f1a\u8c03\u7528XAResource.start(TM_JOIN)
com.atomikos.icatch.serial_jta_transactions=true
#\u6307\u5b9aJVM\u5173\u95ed\u65f6\u662f\u5426\u5f3a\u5236(force)\u5173\u95ed\u4e8b\u52a1\u7ba1\u7406\u5668\uff0c\u9ed8\u8ba4\u4e3afalse
com.atomikos.icatch.force_shutdown_on_vm_exit=false
#\u5728\u6b63\u5e38\u5173\u95ed(no-force)\u7684\u60c5\u51b5\u4e0b\uff0c\u5e94\u8be5\u7b49\u5f85\u4e8b\u52a1\u6267\u884c\u5b8c\u6210\u7684\u65f6\u95f4\uff0c\u9ed8\u8ba4\u4e3aLong.MAX_VALUE
com.atomikos.icatch.default_max_wait_time_on_shutdown=9223372036854775807
 
#===============================================================
#=========\u4e8b\u52a1\u65e5\u5fd7(Transaction logs)\u8bb0\u5f55\u914d\u7f6e =========================
#===============================================================
#\u4e8b\u52a1\u65e5\u5fd7\u76ee\u5f55\uff0c\u9ed8\u8ba4\u4e3a./\u3002
com.atomikos.icatch.log_base_dir=./atomikosLog
#\u4e8b\u52a1\u65e5\u5fd7\u6587\u4ef6\u524d\u7f00\uff0c\u9ed8\u8ba4\u4e3atmlog\u3002\u4e8b\u52a1\u65e5\u5fd7\u5b58\u50a8\u5728\u6587\u4ef6\u4e2d\uff0c\u6587\u4ef6\u540d\u5305\u542b\u4e00\u4e2a\u6570\u5b57\u540e\u7f00\uff0c\u65e5\u5fd7\u6587\u4ef6\u4ee5.log\u4e3a\u6269\u5c55\u540d\uff0c\u5982tmlog1.log\u3002\u9047\u5230checkpoint\u65f6\uff0c\u65b0\u7684\u4e8b\u52a1\u65e5\u5fd7\u6587\u4ef6\u4f1a\u88ab\u521b\u5efa\uff0c\u6570\u5b57\u589e\u52a0\u3002
com.atomikos.icatch.log_base_name=tmlog
#\u6307\u5b9a\u4e24\u6b21checkpoint\u7684\u65f6\u95f4\u95f4\u9694\uff0c\u9ed8\u8ba4\u4e3a500
com.atomikos.icatch.checkpoint_interval=500

#===============================================================
#=========\u4e8b\u52a1\u65e5\u5fd7\u6062\u590d(Recovery)\u914d\u7f6e =============
#===============================================================
#\u6307\u5b9a\u5728\u591a\u957f\u65f6\u95f4\u540e\u53ef\u4ee5\u6e05\u7a7a\u65e0\u6cd5\u6062\u590d\u7684\u4e8b\u52a1\u65e5\u5fd7(orphaned)\uff0c\u9ed8\u8ba486400000ms
com.atomikos.icatch.forget_orphaned_log_entries_delay=86400000
#\u6307\u5b9a\u4e24\u6b21\u6062\u590d\u626b\u63cf\u4e4b\u95f4\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002\u9ed8\u8ba4\u503c\u4e3a\u4e0ecom.atomikos.icatch.default_jta_timeout\u76f8\u540c
com.atomikos.icatch.recovery_delay=${com.atomikos.icatch.default_jta_timeout}
#\u63d0\u4ea4\u5931\u8d25\u65f6\uff0c\u518d\u629b\u51fa\u4e00\u4e2a\u5f02\u5e38\u4e4b\u524d\uff0c\u6700\u591a\u53ef\u4ee5\u91cd\u8bd5\u51e0\u6b21\uff0c\u9ed8\u8ba4\u503c\u4e3a5
com.atomikos.icatch.oltp_max_retries=5
#\u63d0\u4ea4\u5931\u8d25\u65f6\uff0c\u6bcf\u6b21\u91cd\u8bd5\u7684\u65f6\u95f4\u95f4\u9694\uff0c\u9ed8\u8ba410000ms
com.atomikos.icatch.oltp_retry_interval=10000

#===============================================================
#=========\u5176\u4ed6===================================================
#===============================================================
java.naming.factory.initial=com.sun.jndi.rmi.registry.RegistryContextFactory
com.atomikos.icatch.client_demarcation=false
java.naming.provider.url=rmi://localhost:1099
com.atomikos.icatch.rmi_export_class=none
com.atomikos.icatch.trust_client_tm=false